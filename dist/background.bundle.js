(()=>{"use strict";var e="None";chrome.runtime.onInstalled.addListener((function(){console.log("Privacy Control with OpenAI extension installed."),chrome.contextMenus.create({id:"anonymize-text",title:"Anonymize text",contexts:["selection"]})})),chrome.runtime.onMessage.addListener((function(t,n,o){t.mode&&(console.log("Received mode:",t.mode),e=t.mode),o({status:"Mode received"})}));var t=!1;function n(t,n){console.log("mode:",e),chrome.tabs.sendMessage(t,{action:"showFloatingBox",selectedText:n,mode:e})}chrome.contextMenus.onClicked.addListener((function(e,o){if("anonymize-text"===e.menuItemId){var i=e.selectionText||" ";console.log("Executing script with selected text:",i),c=function(e){t?n(o.id,i):chrome.scripting.executeScript({target:{tabId:e},files:["dist/script.bundle.js"]}).then((function(){console.log("Injected script file"),t=!0,n(o.id,i)})).catch((function(e){console.error("Failed to inject script:",e)}))},chrome.tabs.query({active:!0,currentWindow:!0},(function(e){c(e[0].id)}))}var c}))})();